<!DOCTYPE html>
<html lang='en'>
    <head>
        <title>Color Me #FFC0CB</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="cute-grids/css/normalize.css">
        <link rel="stylesheet" href="cute-grids/css/cutegrids.css">
        <link rel="stylesheet" href="style.css">
        <script
  src="http://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>
        <script src="jscolor-2.0.4/jscolor.js"></script>
        <link href="https://fonts.googleapis.com/css?family=Montserrat|Sacramento" rel="stylesheet">
        
    </head>
    <body onload="updateColor()">
        <div class="row">
            <div id="main-text" class="cute-12-laptop">
                <h1>I'm feeling <span>#FFC0CB</span> today.</h1>
            </div>
        </div>
        
        <div id="screen-select" class="row">
            <div class="cute-12">
                <button id="title-screen-button" onclick="showTitle()"></button>
                <button id="analysis-screen-button" onclick="showAnalysis()"></button>
                <button id="input-screen-button" onclick="showInputs()"></button>
                <button id="settings-screen-button"  onclick="showSettings()"></button>
            </div>
        </div>
        
        <div id="title" class="row">
            <div class="cute-12">
                <h2>COLOR ME #RRGGBB</h2>
            </div>
        </div>
        
        <div id="text-analysis" class="row">
            <div class="cute-12">
                <textarea placeholder="Tell me about your day."></textarea>
            </div>
        </div>
        
        <div id="user-input" class="row">
            <div class="cute-12">
                <p>Tell me how you're feeling.</p>
                <span>:(</span><input id="feelings-input" type="range" min="0" max="1" step="any" value="0.5" onchange="updateColor()"><span>:)</span>
            </div> 
        </div>
        
        <div id="color-settings" class="row">
            <div class="cute-6-tablet">
                <p>What's a good color?</p>
                <input id="good-color-input" class="jscolor {hash:true}" onchange="updateColor()" value="FF9FAB">
            </div>
            <div class="cute-6-tablet">
                <p>What's a bad color?</p>
                <input id="bad-color-input" class="jscolor {hash:true}" value="3E4E84" onchange="updateColor()">
            </div>
        </div>

        

        
        <script type="text/javascript">
            
            var positiveMultiplier = document.getElementById('feelings-input').value;
            var goodColor = document.getElementById('good-color-input').value;
            var badColor = document.getElementById('bad-color-input').value;
            
            function updatePositivity() {
                positiveMultiplier = document.getElementById('feelings-input').value;
            }
            function updateGoodColor() {
                goodColor = document.getElementById('good-color-input').value;
            }
            function updateBadColor() {
                badColor = document.getElementById('bad-color-input').value;
            }
            
            function updateColor() {
                updatePositivity();
                updateGoodColor();
                updateBadColor();
                // Algorithm credit to: https://stackoverflow.com/questions/14482226/how-can-i-get-the-color-halfway-between-two-colors and https://www.programming-idioms.org/idiom/154/halfway-between-two-hex-color-codes
                
                // Separate the good and bad colors to their r,g,b components
                var r1 = goodColor.substring(1,3);
                var g1 = goodColor.substring(3,5);
                var b1 = goodColor.substring(5,7);
                
                var r2 = badColor.substring(1,3);
                var g2 = badColor.substring(3,5);
                var b2 = badColor.substring(5,7);
                
                // Hex to decimal
                r1 = parseInt(r1, 16);
                g1 = parseInt(g1, 16);
                b1 = parseInt(b1, 16);
                
                r2 = parseInt(r2, 16);
                g2 = parseInt(g2, 16);
                b2 = parseInt(b2, 16);
                
                // Average
                var pos = positiveMultiplier;
                var neg = 1- positiveMultiplier;
                
                var r = Math.floor((r1 * pos) + (r2 * neg));
                var g = Math.floor((g1 * pos) + (g2 * neg));
                var b = Math.floor((b1 * pos) + (b2 * neg));
                
                // Back to hex
                r = r.toString(16).toUpperCase();
                g = g.toString(16).toUpperCase();
                b = b.toString(16).toUpperCase();
                
                // Pad with leading zero if necessary
                if (r.length < 2) {
                    r = "0" + r;
                }
                if (g.length < 2) {
                    g = "0" + g;
                }
                if (b.length < 2) {
                    b = "0" + b;
                }
                
                var color = "#" + r + g + b;
                
                document.getElementById('main-text').style.backgroundColor = color;
                document.getElementById('screen-select').style.backgroundColor = color;
                document.getElementById('title').style.backgroundColor = color;
                document.getElementById('text-analysis').style.backgroundColor = color;
                document.getElementById('user-input').style.backgroundColor = color;
                document.getElementById('color-settings').style.backgroundColor = color;
                
                document.getElementById('main-text').innerHTML = "<h1>I'm feeling <span>" + color + "</span> today.</h1>";
            }
            
            
            function showTitle() { 
                document.getElementById('title').style.display = 'block';
                document.getElementById('text-analysis').style.display = 'none';
                document.getElementById('user-input').style.display = 'none';
                document.getElementById('color-settings').style.display = 'none';
                document.getElementById('title-screen-button').style.backgroundColor = 'rgba(255, 255, 255, 1)';
                document.getElementById('analysis-screen-button').style.backgroundColor = 'rgba(255, 255, 255, 0.3)';
                document.getElementById('input-screen-button').style.backgroundColor = 'rgba(255, 255, 255, 0.3)';
                document.getElementById('settings-screen-button').style.backgroundColor = 'rgba(255, 255, 255, 0.3)';
            }
            function showAnalysis() {
                document.getElementById('title').style.display = 'none';
                document.getElementById('text-analysis').style.display = 'block';
                document.getElementById('user-input').style.display = 'none';
                document.getElementById('color-settings').style.display = 'none';
                document.getElementById('title-screen-button').style.backgroundColor = 'rgba(255, 255, 255, 0.3)';
                document.getElementById('analysis-screen-button').style.backgroundColor = 'rgba(255, 255, 255, 1)';
                document.getElementById('input-screen-button').style.backgroundColor = 'rgba(255, 255, 255, 0.3)';
                document.getElementById('settings-screen-button').style.backgroundColor = 'rgba(255, 255, 255, 0.3)';
            }
            function showInputs() {
                document.getElementById('title').style.display = 'none';
                document.getElementById('text-analysis').style.display = 'none';
                document.getElementById('user-input').style.display = 'block';
                document.getElementById('color-settings').style.display = 'none';
                document.getElementById('title-screen-button').style.backgroundColor = 'rgba(255, 255, 255, 0.3)';
                document.getElementById('analysis-screen-button').style.backgroundColor = 'rgba(255, 255, 255, 0.3)';
                document.getElementById('input-screen-button').style.backgroundColor = 'rgba(255, 255, 255, 1)';
                document.getElementById('settings-screen-button').style.backgroundColor = 'rgba(255, 255, 255, 0.3)';
            }
            function showSettings() {
                document.getElementById('title').style.display = 'none';
                document.getElementById('text-analysis').style.display = 'none';
                document.getElementById('user-input').style.display = 'none';
                document.getElementById('color-settings').style.display = 'block';
                document.getElementById('title-screen-button').style.backgroundColor = 'rgba(255, 255, 255, 0.3)';
                document.getElementById('analysis-screen-button').style.backgroundColor = 'rgba(255, 255, 255, 0.3)';
                document.getElementById('input-screen-button').style.backgroundColor = 'rgba(255, 255, 255, 0.3)';
                document.getElementById('settings-screen-button').style.backgroundColor = 'rgba(255, 255, 255, 1)';
            }
        </script>
    
    </body>    
</html>